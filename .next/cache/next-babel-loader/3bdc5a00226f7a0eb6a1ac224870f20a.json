{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/nnoll/dev/firelist/client/components/editableHeadline/index.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect } from \"react\";\nimport styles from './styles.module.scss';\nimport ContentEditable from 'react-contenteditable';\nimport usePrevious from '../../helper/usePrevious';\n\nvar EditableHeadline = function EditableHeadline(_ref) {\n  _s();\n\n  var fireType = _ref.fireType,\n      fetchedTitle = _ref.fetchedTitle,\n      userId = _ref.userId;\n\n  var _useState = useState(fetchedTitle),\n      title = _useState[0],\n      setTitle = _useState[1];\n\n  var prevTitle = usePrevious(title); // update database here if blocks get added or removed\n\n  useEffect(function () {\n    var pushTitleToServer = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(title) {\n        var pushBody, fetchUrl;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                pushBody = function pushBody() {\n                  if (fireType === \"primaryFire\") {\n                    return {\n                      userId: userId,\n                      primaryTitle: title\n                    };\n                  }\n\n                  if (fireType === \"secondaryFire\") {\n                    return {\n                      userId: userId,\n                      secondaryTitle: title\n                    };\n                  }\n\n                  if (fireType === \"dumpsterFire\") {\n                    return {\n                      userId: userId,\n                      dumpsterTitle: title\n                    };\n                  }\n                };\n\n                fetchUrl = \"\".concat(process.env.SERVER_URL, \"/fires\");\n                _context.prev = 2;\n                _context.next = 5;\n                return fetch(fetchUrl, {\n                  method: \"PUT\",\n                  credentials: \"include\",\n                  headers: {\n                    \"Content-Type\": \"application/json\"\n                  },\n                  body: JSON.stringify(pushBody())\n                });\n\n              case 5:\n                _context.next = 10;\n                break;\n\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context[\"catch\"](2);\n                console.log(_context.t0);\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 7]]);\n      }));\n\n      return function pushTitleToServer(_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    if (prevTitle && prevTitle !== title) {\n      pushTitleToServer(title);\n    }\n  }, [title, prevTitle]);\n\n  var handleHTMLChange = function handleHTMLChange(e) {\n    setTitle(e.target.value);\n  };\n\n  return __jsx(ContentEditable, {\n    className: styles.headline,\n    html: title,\n    onChange: handleHTMLChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  });\n};\n\n_s(EditableHeadline, \"0TdMccYquYQynCyKFrr9MXBy8wU=\", false, function () {\n  return [usePrevious];\n});\n\n_c = EditableHeadline;\nexport default EditableHeadline;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditableHeadline\");","map":{"version":3,"sources":["/Users/nnoll/dev/firelist/client/components/editableHeadline/index.js"],"names":["useState","useEffect","styles","ContentEditable","usePrevious","EditableHeadline","fireType","fetchedTitle","userId","title","setTitle","prevTitle","pushTitleToServer","pushBody","primaryTitle","secondaryTitle","dumpsterTitle","fetchUrl","process","env","SERVER_URL","fetch","method","credentials","headers","body","JSON","stringify","console","log","handleHTMLChange","e","target","value","headline"],"mappings":";;;;;;;;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,eAAP,MAA4B,uBAA5B;AACA,OAAOC,WAAP,MAAwB,0BAAxB;;AAEA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,OAAwC;AAAA;;AAAA,MAArCC,QAAqC,QAArCA,QAAqC;AAAA,MAA3BC,YAA2B,QAA3BA,YAA2B;AAAA,MAAbC,MAAa,QAAbA,MAAa;;AAAA,kBAErCR,QAAQ,CAACO,YAAD,CAF6B;AAAA,MAExDE,KAFwD;AAAA,MAEjDC,QAFiD;;AAG/D,MAAMC,SAAS,GAAGP,WAAW,CAACK,KAAD,CAA7B,CAH+D,CAK/D;;AACAR,EAAAA,SAAS,CAAC,YAAK;AACb,QAAMW,iBAAiB;AAAA,2EAAG,iBAAOH,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAClBI,gBAAAA,QADkB,GACP,SAAXA,QAAW,GAAM;AACrB,sBAAGP,QAAQ,KAAK,aAAhB,EAA8B;AAC5B,2BAAO;AAAEE,sBAAAA,MAAM,EAAEA,MAAV;AAAkBM,sBAAAA,YAAY,EAAEL;AAAhC,qBAAP;AACD;;AACD,sBAAGH,QAAQ,KAAK,eAAhB,EAAgC;AAC9B,2BAAO;AAAEE,sBAAAA,MAAM,EAAEA,MAAV;AAAkBO,sBAAAA,cAAc,EAAEN;AAAlC,qBAAP;AACD;;AACD,sBAAGH,QAAQ,KAAK,cAAhB,EAA+B;AAC7B,2BAAO;AAAEE,sBAAAA,MAAM,EAAEA,MAAV;AAAkBQ,sBAAAA,aAAa,EAAEP;AAAjC,qBAAP;AACD;AACF,iBAXuB;;AAalBQ,gBAAAA,QAbkB,aAaJC,OAAO,CAACC,GAAR,CAAYC,UAbR;AAAA;AAAA;AAAA,uBAehBC,KAAK,CAAEJ,QAAF,EAAY;AACrBK,kBAAAA,MAAM,EAAE,KADa;AAErBC,kBAAAA,WAAW,EAAE,SAFQ;AAGrBC,kBAAAA,OAAO,EAAE;AAAE,oCAAgB;AAAlB,mBAHY;AAIrBC,kBAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAed,QAAQ,EAAvB;AAJe,iBAAZ,CAfW;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAqBTe,gBAAAA,OAAO,CAACC,GAAR;;AArBS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAH;;AAAA,sBAAjBjB,iBAAiB;AAAA;AAAA;AAAA,OAAvB;;AAuBA,QAAID,SAAS,IAAIA,SAAS,KAAKF,KAA/B,EAAsC;AACpCG,MAAAA,iBAAiB,CAACH,KAAD,CAAjB;AACD;AACF,GA3BQ,EA2BN,CAACA,KAAD,EAAQE,SAAR,CA3BM,CAAT;;AA6BA,MAAMmB,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,CAAD,EAAO;AAC9BrB,IAAAA,QAAQ,CAACqB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAR;AACD,GAFD;;AAIA,SACE,MAAC,eAAD;AACE,IAAA,SAAS,EAAE/B,MAAM,CAACgC,QADpB;AAEE,IAAA,IAAI,EAAEzB,KAFR;AAGE,IAAA,QAAQ,EAAEqB,gBAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF;AAOD,CA9CD;;GAAMzB,gB;UAGcD,W;;;KAHdC,gB;AAgDN,eAAeA,gBAAf","sourcesContent":["import { useState, useEffect } from \"react\";\nimport styles from './styles.module.scss'\nimport ContentEditable from 'react-contenteditable'\nimport usePrevious from '../../helper/usePrevious'\n\nconst EditableHeadline = ({ fireType, fetchedTitle, userId }) => {\n\n  const [title, setTitle] = useState(fetchedTitle);\n  const prevTitle = usePrevious(title)\n\n  // update database here if blocks get added or removed\n  useEffect(() =>{\n    const pushTitleToServer = async (title) => {\n      const pushBody = () => {\n        if(fireType === \"primaryFire\"){\n          return { userId: userId, primaryTitle: title }\n        }\n        if(fireType === \"secondaryFire\"){\n          return { userId: userId, secondaryTitle: title }\n        }\n        if(fireType === \"dumpsterFire\"){\n          return { userId: userId, dumpsterTitle: title }\n        }\n      }\n\n      const fetchUrl = `${process.env.SERVER_URL}/fires`\n      try {\n        await fetch (fetchUrl, {\n          method: \"PUT\",\n          credentials: \"include\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify(pushBody()),\n        })\n      } catch(err) { console.log(err)}\n    }\n    if (prevTitle && prevTitle !== title) {\n      pushTitleToServer(title)\n    }\n  }, [title, prevTitle])\n\n  const handleHTMLChange = (e) => {\n    setTitle(e.target.value)\n  }\n\n  return(\n    <ContentEditable\n      className={styles.headline}\n      html={title}\n      onChange={handleHTMLChange}\n    />\n  )\n}\n\nexport default EditableHeadline\n"]},"metadata":{},"sourceType":"module"}