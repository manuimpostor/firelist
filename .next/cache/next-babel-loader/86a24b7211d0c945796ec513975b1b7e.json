{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$();\n\nimport { useEffect } from 'react';\nimport useRouter from 'next/router';\n\nvar Logout = function Logout() {\n  _s();\n\n  useEffect(function () {\n    var logoutOnServer = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var router;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                router = useRouter;\n                _context.prev = 1;\n                _context.next = 4;\n                return fetch(\"\".concat(process.env.SERVER_URL, \"/user/logout\"), {\n                  method: \"POST\",\n                  credentials: \"include\",\n                  headers: {\n                    \"Content-Type\": \"application/json\"\n                  }\n                });\n\n              case 4:\n                router.push(\"/login\");\n                _context.next = 10;\n                break;\n\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context[\"catch\"](1);\n                console.log(_context.t0);\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 7]]);\n      }));\n\n      return function logoutOnServer() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    logoutOnServer();\n  }, []);\n  return null;\n};\n\n_s(Logout, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c = Logout;\nexport var __N_SSP = true;\nexport default Logout;\n\nvar _c;\n\n$RefreshReg$(_c, \"Logout\");","map":{"version":3,"sources":["/Users/nnoll/dev/firelist/client/pages/logout.js"],"names":["useEffect","useRouter","Logout","logoutOnServer","router","fetch","process","env","SERVER_URL","method","credentials","headers","push","console","log"],"mappings":";;;;;AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,OAAOC,SAAP,MAAsB,aAAtB;;AAKA,IAAMC,MAAM,GAAG,SAATA,MAAS,GAAM;AAAA;;AACnBF,EAAAA,SAAS,CAAC,YAAM;AACd,QAAMG,cAAc;AAAA,0EAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AACfC,gBAAAA,MADe,GACNH,SADM;AAAA;AAAA;AAAA,uBAGbI,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,UAAhB,mBAA0C;AACnDC,kBAAAA,MAAM,EAAE,MAD2C;AAEnDC,kBAAAA,WAAW,EAAE,SAFsC;AAGnDC,kBAAAA,OAAO,EAAE;AAAE,oCAAgB;AAAlB;AAH0C,iBAA1C,CAHQ;;AAAA;AAQnBP,gBAAAA,MAAM,CAACQ,IAAP,CAAY,QAAZ;AARmB;AAAA;;AAAA;AAAA;AAAA;AAUnBC,gBAAAA,OAAO,CAACC,GAAR;;AAVmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAH;;AAAA,sBAAdX,cAAc;AAAA;AAAA;AAAA,OAApB;;AAaAA,IAAAA,cAAc;AACf,GAfQ,EAeN,EAfM,CAAT;AAgBA,SAAO,IAAP;AACD,CAlBD;;GAAMD,M;;KAAAA,M;;AAgCN,eAAeA,MAAf","sourcesContent":["import { useEffect } from 'react'\nimport useRouter from 'next/router'\n\nimport cookies from 'next-cookies'\n\n\nconst Logout = () => {\n  useEffect(() => {\n    const logoutOnServer = async () => {\n      const router = useRouter\n      try {\n        await fetch(`${process.env.SERVER_URL}/user/logout`, {\n          method: \"POST\",\n          credentials: \"include\",\n          headers: { \"Content-Type\": \"application/json\" },\n        })\n        router.push(\"/login\")\n      } catch (err) {\n        console.log(err)\n      }\n    }\n    logoutOnServer()\n  }, [])\n  return null\n}\n\nexport const getServerSideProps = async (context) => {\n  const { token } = cookies(context)\n  const res = context.res\n\n  if(!token) {\n    res.writeHead(302, { Location: `/login` })\n    res.end()\n  }\n\n  return { props: {} }\n}\n\nexport default Logout\n"]},"metadata":{},"sourceType":"module"}