{"ast":null,"code":"import { useEffect } from 'react';\nimport useRouter from 'next/router';\nimport cookies from 'next-cookies';\n\nconst Logout = () => {\n  useEffect(() => {\n    const logoutOnServer = async () => {\n      const router = useRouter;\n\n      try {\n        await fetch(`${process.env.SERVER_URL}/user/logout`, {\n          method: \"POST\",\n          credentials: \"include\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        });\n        router.push(\"/login\");\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    logoutOnServer();\n  }, []);\n  return null;\n};\n\nexport const getServerSideProps = async context => {\n  const {\n    token\n  } = cookies(context);\n  const res = context.res;\n\n  if (!token) {\n    res.writeHead(302, {\n      Location: `/login`\n    });\n    res.end();\n  }\n\n  return {\n    props: {}\n  };\n};\nexport default Logout;","map":{"version":3,"sources":["/Users/nnoll/dev/firelist/client/pages/logout.js"],"names":["useEffect","useRouter","cookies","Logout","logoutOnServer","router","fetch","process","env","SERVER_URL","method","credentials","headers","push","err","console","log","getServerSideProps","context","token","res","writeHead","Location","end","props"],"mappings":"AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,OAAOC,SAAP,MAAsB,aAAtB;AAEA,OAAOC,OAAP,MAAoB,cAApB;;AAGA,MAAMC,MAAM,GAAG,MAAM;AACnBH,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMI,cAAc,GAAG,YAAY;AACjC,YAAMC,MAAM,GAAGJ,SAAf;;AACA,UAAI;AACF,cAAMK,KAAK,CAAE,GAAEC,OAAO,CAACC,GAAR,CAAYC,UAAW,cAA3B,EAA0C;AACnDC,UAAAA,MAAM,EAAE,MAD2C;AAEnDC,UAAAA,WAAW,EAAE,SAFsC;AAGnDC,UAAAA,OAAO,EAAE;AAAE,4BAAgB;AAAlB;AAH0C,SAA1C,CAAX;AAKAP,QAAAA,MAAM,CAACQ,IAAP,CAAY,QAAZ;AACD,OAPD,CAOE,OAAOC,GAAP,EAAY;AACZC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD;AACF,KAZD;;AAaAV,IAAAA,cAAc;AACf,GAfQ,EAeN,EAfM,CAAT;AAgBA,SAAO,IAAP;AACD,CAlBD;;AAoBA,OAAO,MAAMa,kBAAkB,GAAG,MAAOC,OAAP,IAAmB;AACnD,QAAM;AAAEC,IAAAA;AAAF,MAAYjB,OAAO,CAACgB,OAAD,CAAzB;AACA,QAAME,GAAG,GAAGF,OAAO,CAACE,GAApB;;AAEA,MAAG,CAACD,KAAJ,EAAW;AACTC,IAAAA,GAAG,CAACC,SAAJ,CAAc,GAAd,EAAmB;AAAEC,MAAAA,QAAQ,EAAG;AAAb,KAAnB;AACAF,IAAAA,GAAG,CAACG,GAAJ;AACD;;AAED,SAAO;AAAEC,IAAAA,KAAK,EAAE;AAAT,GAAP;AACD,CAVM;AAYP,eAAerB,MAAf","sourcesContent":["import { useEffect } from 'react'\nimport useRouter from 'next/router'\n\nimport cookies from 'next-cookies'\n\n\nconst Logout = () => {\n  useEffect(() => {\n    const logoutOnServer = async () => {\n      const router = useRouter\n      try {\n        await fetch(`${process.env.SERVER_URL}/user/logout`, {\n          method: \"POST\",\n          credentials: \"include\",\n          headers: { \"Content-Type\": \"application/json\" },\n        })\n        router.push(\"/login\")\n      } catch (err) {\n        console.log(err)\n      }\n    }\n    logoutOnServer()\n  }, [])\n  return null\n}\n\nexport const getServerSideProps = async (context) => {\n  const { token } = cookies(context)\n  const res = context.res\n\n  if(!token) {\n    res.writeHead(302, { Location: `/login` })\n    res.end()\n  }\n\n  return { props: {} }\n}\n\nexport default Logout\n"]},"metadata":{},"sourceType":"module"}