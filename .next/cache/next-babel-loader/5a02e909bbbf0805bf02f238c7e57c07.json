{"ast":null,"code":"var _jsxFileName = \"/Users/nnoll/dev/firelist/client/components/editableHeadline/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect } from \"react\";\nimport styles from './styles.module.scss';\nimport ContentEditable from 'react-contenteditable';\nimport usePrevious from '../../helper/usePrevious';\n\nconst EditableHeadline = ({\n  fireType,\n  fetchedTitle,\n  userId\n}) => {\n  const {\n    0: title,\n    1: setTitle\n  } = useState(fetchedTitle);\n  const prevTitle = usePrevious(title); // update database here if blocks get added or removed\n\n  useEffect(() => {\n    const pushTitleToServer = async title => {\n      const pushBody = () => {\n        if (fireType === \"primaryFire\") {\n          return {\n            userId: userId,\n            primaryTitle: title\n          };\n        }\n\n        if (fireType === \"secondaryFire\") {\n          return {\n            userId: userId,\n            secondaryTitle: title\n          };\n        }\n\n        if (fireType === \"dumpsterFire\") {\n          return {\n            userId: userId,\n            dumpsterTitle: title\n          };\n        }\n      };\n\n      const fetchUrl = `${process.env.SERVER_URL}/fires`;\n\n      try {\n        await fetch(fetchUrl, {\n          method: \"PUT\",\n          credentials: \"include\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify(pushBody())\n        });\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    if (prevTitle && prevTitle !== title) {\n      pushTitleToServer(title);\n    }\n  }, [title, prevTitle]);\n\n  const handleHTMLChange = e => {\n    setTitle(e.target.value);\n  };\n\n  return __jsx(ContentEditable, {\n    className: styles.headline,\n    html: title,\n    onChange: handleHTMLChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  });\n};\n\nexport default EditableHeadline;","map":{"version":3,"sources":["/Users/nnoll/dev/firelist/client/components/editableHeadline/index.js"],"names":["useState","useEffect","styles","ContentEditable","usePrevious","EditableHeadline","fireType","fetchedTitle","userId","title","setTitle","prevTitle","pushTitleToServer","pushBody","primaryTitle","secondaryTitle","dumpsterTitle","fetchUrl","process","env","SERVER_URL","fetch","method","credentials","headers","body","JSON","stringify","err","console","log","handleHTMLChange","e","target","value","headline"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,eAAP,MAA4B,uBAA5B;AACA,OAAOC,WAAP,MAAwB,0BAAxB;;AAEA,MAAMC,gBAAgB,GAAG,CAAC;AAAEC,EAAAA,QAAF;AAAYC,EAAAA,YAAZ;AAA0BC,EAAAA;AAA1B,CAAD,KAAwC;AAE/D,QAAM;AAAA,OAACC,KAAD;AAAA,OAAQC;AAAR,MAAoBV,QAAQ,CAACO,YAAD,CAAlC;AACA,QAAMI,SAAS,GAAGP,WAAW,CAACK,KAAD,CAA7B,CAH+D,CAK/D;;AACAR,EAAAA,SAAS,CAAC,MAAK;AACb,UAAMW,iBAAiB,GAAG,MAAOH,KAAP,IAAiB;AACzC,YAAMI,QAAQ,GAAG,MAAM;AACrB,YAAGP,QAAQ,KAAK,aAAhB,EAA8B;AAC5B,iBAAO;AAAEE,YAAAA,MAAM,EAAEA,MAAV;AAAkBM,YAAAA,YAAY,EAAEL;AAAhC,WAAP;AACD;;AACD,YAAGH,QAAQ,KAAK,eAAhB,EAAgC;AAC9B,iBAAO;AAAEE,YAAAA,MAAM,EAAEA,MAAV;AAAkBO,YAAAA,cAAc,EAAEN;AAAlC,WAAP;AACD;;AACD,YAAGH,QAAQ,KAAK,cAAhB,EAA+B;AAC7B,iBAAO;AAAEE,YAAAA,MAAM,EAAEA,MAAV;AAAkBQ,YAAAA,aAAa,EAAEP;AAAjC,WAAP;AACD;AACF,OAVD;;AAYA,YAAMQ,QAAQ,GAAI,GAAEC,OAAO,CAACC,GAAR,CAAYC,UAAW,QAA3C;;AACA,UAAI;AACF,cAAMC,KAAK,CAAEJ,QAAF,EAAY;AACrBK,UAAAA,MAAM,EAAE,KADa;AAErBC,UAAAA,WAAW,EAAE,SAFQ;AAGrBC,UAAAA,OAAO,EAAE;AAAE,4BAAgB;AAAlB,WAHY;AAIrBC,UAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAed,QAAQ,EAAvB;AAJe,SAAZ,CAAX;AAMD,OAPD,CAOE,OAAMe,GAAN,EAAW;AAAEC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AAAiB;AACjC,KAtBD;;AAuBA,QAAIjB,SAAS,IAAIA,SAAS,KAAKF,KAA/B,EAAsC;AACpCG,MAAAA,iBAAiB,CAACH,KAAD,CAAjB;AACD;AACF,GA3BQ,EA2BN,CAACA,KAAD,EAAQE,SAAR,CA3BM,CAAT;;AA6BA,QAAMoB,gBAAgB,GAAIC,CAAD,IAAO;AAC9BtB,IAAAA,QAAQ,CAACsB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAR;AACD,GAFD;;AAIA,SACE,MAAC,eAAD;AACE,IAAA,SAAS,EAAEhC,MAAM,CAACiC,QADpB;AAEE,IAAA,IAAI,EAAE1B,KAFR;AAGE,IAAA,QAAQ,EAAEsB,gBAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF;AAOD,CA9CD;;AAgDA,eAAe1B,gBAAf","sourcesContent":["import { useState, useEffect } from \"react\";\nimport styles from './styles.module.scss'\nimport ContentEditable from 'react-contenteditable'\nimport usePrevious from '../../helper/usePrevious'\n\nconst EditableHeadline = ({ fireType, fetchedTitle, userId }) => {\n\n  const [title, setTitle] = useState(fetchedTitle);\n  const prevTitle = usePrevious(title)\n\n  // update database here if blocks get added or removed\n  useEffect(() =>{\n    const pushTitleToServer = async (title) => {\n      const pushBody = () => {\n        if(fireType === \"primaryFire\"){\n          return { userId: userId, primaryTitle: title }\n        }\n        if(fireType === \"secondaryFire\"){\n          return { userId: userId, secondaryTitle: title }\n        }\n        if(fireType === \"dumpsterFire\"){\n          return { userId: userId, dumpsterTitle: title }\n        }\n      }\n\n      const fetchUrl = `${process.env.SERVER_URL}/fires`\n      try {\n        await fetch (fetchUrl, {\n          method: \"PUT\",\n          credentials: \"include\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify(pushBody()),\n        })\n      } catch(err) { console.log(err)}\n    }\n    if (prevTitle && prevTitle !== title) {\n      pushTitleToServer(title)\n    }\n  }, [title, prevTitle])\n\n  const handleHTMLChange = (e) => {\n    setTitle(e.target.value)\n  }\n\n  return(\n    <ContentEditable\n      className={styles.headline}\n      html={title}\n      onChange={handleHTMLChange}\n    />\n  )\n}\n\nexport default EditableHeadline\n"]},"metadata":{},"sourceType":"module"}